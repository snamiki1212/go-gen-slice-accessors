# go-gen-slice-accessors

Generate accessors for each field in the slice struct.

- <b>Easy Setup & Removal</b>
- <b>Code Generation & Zero Package Size</b>

<img src="https://github.com/user-attachments/assets/92602519-44ab-49ad-9093-46fe3858eed3" />

## Usage

### 1. Install `go-gen-sllice-accessors`

```zsh
$ go install github.com/snamiki1212/go-gen-slice-accessors@latest
$ go-gen-slice-accessors --help
# -> To ensure it was installed correctly, otherwise set up your GOPATH like `export PATH=$PATH:$(go env GOPATH)/bin`
```

### 2. Add `go:generate` directive.

```diff filename="user.go"
package main

+//go:generate go-gen-slice-accessors --entity User --slice Users --input user.go --output user_gen.go
type User struct {
  UserID    string
}

type Users []User
```

### 3. Run `go generate` command.

```diff filename="user_gen.go"
+// Code generated by go generate DO NOT EDIT.
+
+package main
+
+// UserIDs
+func (xs Users) UserIDs() []string {
+	sli := make([]string, 0, len(xs))
+	for i := range xs {
+		sli = append(sli, xs[i].UserID)
+	}
+	return sli
+}
```

### 4. Use accessors

```go
package main

import "fmt"

func main() {
	us := Users{{UserID: "1"}, {UserID: "2"}, {UserID: "3"}}
	ids := us.UserIDs() // ðŸš€ You can use accessors for slice.
	fmt.Println(ids) // [1 2 3]
}
```

> [!TIP]
> Recommended to install a binary with `go:generate` and your team can skip the installation but simly run `go generate`.
>
> ```diff
> +//go:generate go install github.com/snamiki1212/go-gen-slice-accessors@latest
> +//go:generate go-gen-slice-accessors --entity User --slice Users --input user.go --output user_gen.go
>   type User struct {
>     ...
> ```

## Help

```shell
Generate accessors for each field in the slice struct.

Usage:
  gen-slice-accessors [flags]

Flags:
  -e, --entity string     [required] Target entity name
  -x, --exclude strings   Field names to exclude
  -h, --help              help for gen-slice-accessors
  -m, --import strings    Import path name
                           e.g. --import=time
                           e.g. --import=time:aliasTime
  -i, --input string      [required] Input file name
  -o, --output string     [required] Output file name
  -r, --rename strings    Rename accessor name
                           e.g. --rename=Name:GetName
  -s, --slice string      [required] Target slice name
```

## Examples

Generated example Codes.

- [Common case](./example/user_gen.go) ([source](./example/user.go))
- [Private field case](./example/private_gen.go) ([source](./example/private.go))
- [Exclude flag](./example/exclude_gen.go) ([source](./example/exclude.go))
- [Rename flag](./example/rename_gen.go) ([source](./example/rename.go))
- [Import flag](./example/imported_gen.go) ([source](./example/imported.go))

## Contribution

### E2E

```shell
$ go generate ./example
$ go run ./example
```

## Alternatives

If you like this package and would like to generate more, please refer to the following.

- [go-gen-lo](https://github.com/snamiki1212/go-gen-lo): Generate samber/lo method for your struct.

## LICENSE

[MIT](./LICENSE)
